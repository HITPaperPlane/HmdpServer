<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36" version="28.2.9">
  <diagram name="ç¬¬ 1 é¡µ" id="qfHXaPNtUsiwIKiVRbfW">
    <mxGraphModel dx="2377" dy="2409" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="KwuJ8whSr2vagKZpqVsR-1" value="â”â”â”â”â”â”â”â”â”â”â”â”â”â” Feedæµç³»ç»Ÿ - æŽ¨é€æ¨¡å¼(Push) + æ»šåŠ¨åˆ†é¡µ â”â”â”â”â”â”â”â”â”â”â”â”â”â”" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;fontSize=18;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="-70" width="1900" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-2" value="â”â”â”â”â”â” å‘å¸ƒç¬”è®°æµç¨‹ (POST /blog) - æŽ¨é€åˆ°ç²‰ä¸æ”¶ä»¶ç®± â”â”â”â”â”â”" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Comic Sans MS;fontSize=15;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="30" width="950" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-3" value="å¼€å§‹: å‘å¸ƒç¬”è®°&#xa;POST /blog" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="130" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-4" value="ä¿å­˜åˆ°MySQL&#xa;INSERT INTO tb_blog" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="240" y="230" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-5" value="åˆ¤æ–­: ä¿å­˜æ˜¯å¦æˆåŠŸ?" style="whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontFamily=Comic Sans MS;shape=rhombus;" vertex="1" parent="1">
          <mxGeometry x="240" y="350" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-6" value="å¤±è´¥&#xa;è¿”å›žé”™è¯¯" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="350" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-7" value="æŸ¥è¯¢ç²‰ä¸åˆ—è¡¨&#xa;SELECT * FROM tb_follow WHERE follow_user_id=?" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="240" y="470" width="140" height="90" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-8" value="éåŽ†ç²‰ä¸&#xa;for(Follow f : fans)" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="240" y="600" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-9" value="æŽ¨é€åˆ°ç²‰ä¸æ”¶ä»¶ç®±&#xa;ZADD feed:{fansId} {timestamp} {blogId}" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="240" y="720" width="140" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-10" value="è¿”å›žæˆåŠŸ&#xa;blogId" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Comic Sans MS;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="860" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-11" value="ðŸ“ MySQL: tb_blog&#xa;â”â”â”â”â”â”â”â”&#xa;id (PK)&#xa;user_id (FK)&#xa;title&#xa;content&#xa;images&#xa;liked (ç‚¹èµžæ•°)&#xa;comments&#xa;create_time" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;fontSize=11;align=left;shape=cylinder3;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="470" y="230" width="200" height="150" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-12" value="ðŸ“ MySQL: tb_follow&#xa;â”â”â”â”â”â”â”â”&#xa;id (PK)&#xa;user_id (ç²‰ä¸)&#xa;follow_user_id (åšä¸»)&#xa;create_time" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;fontSize=11;align=left;shape=cylinder3;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="470" y="470" width="200" height="130" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-13" value="ðŸ”´ Redis: feed:{userId}&#xa;â”â”â”â”â”â”â”â”&#xa;æ•°æ®ç»“æž„: ZSet&#xa;score: æ—¶é—´æˆ³&#xa;member: blogId&#xa;â”â”â”â”â”â”â”â”&#xa;ä½œç”¨: æ¯ä¸ªç”¨æˆ·çš„æ”¶ä»¶ç®±&#xa;å­˜å‚¨å…³æ³¨çš„äººå‘çš„ç¬”è®°ID" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;fontSize=11;align=left;shape=cylinder3;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="470" y="720" width="220" height="140" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-14" value="æ­¥éª¤1" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-3" target="KwuJ8whSr2vagKZpqVsR-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-15" value="æ­¥éª¤2" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-4" target="KwuJ8whSr2vagKZpqVsR-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-16" value="å¤±è´¥" style="rounded=0;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;strokeColor=#b85450;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-5" target="KwuJ8whSr2vagKZpqVsR-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-17" value="æˆåŠŸ" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-5" target="KwuJ8whSr2vagKZpqVsR-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-18" value="æ­¥éª¤3" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-7" target="KwuJ8whSr2vagKZpqVsR-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-19" value="æ­¥éª¤4" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-8" target="KwuJ8whSr2vagKZpqVsR-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-20" value="å…¨éƒ¨æŽ¨é€å®Œæˆ" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-9" target="KwuJ8whSr2vagKZpqVsR-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-21" value="" style="rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Comic Sans MS;dashed=1;strokeColor=#b85450;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-4" target="KwuJ8whSr2vagKZpqVsR-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-22" value="" style="rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Comic Sans MS;dashed=1;strokeColor=#b85450;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-7" target="KwuJ8whSr2vagKZpqVsR-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-23" value="" style="rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Comic Sans MS;dashed=1;strokeColor=#6c8ebf;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-9" target="KwuJ8whSr2vagKZpqVsR-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-24" value="â”â”â” æŸ¥è¯¢Feedæµ (GET /blog/of/follow) - æ»šåŠ¨åˆ†é¡µ â”â”â”" style="whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontFamily=Comic Sans MS;fontSize=15;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1140" y="30" width="850" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-25" value="å¼€å§‹: æŸ¥è¯¢Feedæµ&#xa;lastId, offset" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1340" y="130" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-26" value="ä»ŽRedisæŸ¥è¯¢æ”¶ä»¶ç®±&#xa;ZREVRANGEBYSCORE feed:{userId} max min WITHSCORES LIMIT offset 2" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1340" y="230" width="140" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-27" value="åˆ¤æ–­: æ˜¯å¦ä¸ºç©º?" style="whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontFamily=Comic Sans MS;shape=rhombus;" vertex="1" parent="1">
          <mxGeometry x="1340" y="370" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-28" value="ä¸ºç©º&#xa;è¿”å›žç©ºåˆ—è¡¨" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Comic Sans MS;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1140" y="370" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-29" value="è§£æžæ•°æ®&#xa;blogIdsã€minTimeã€offsetè®¡ç®—" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1340" y="470" width="140" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-30" value="æ ¹æ®blogIdsæŸ¥è¯¢MySQL&#xa;SELECT * FROM tb_blog WHERE id IN (...) ORDER BY FIELD(id,...)" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1340" y="610" width="140" height="90" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-31" value="éåŽ†Blog&#xa;å¡«å……ç”¨æˆ·ä¿¡æ¯å’Œç‚¹èµžçŠ¶æ€" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1340" y="740" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-32" value="è¿”å›žScrollResult&#xa;{blogs, minTime, offset}" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Comic Sans MS;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1340" y="860" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-33" value="&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;ðŸ”´ Redis: feed:{userId}&lt;br&gt;valueçš„scoreæ˜¯æ—¶é—´æˆ³ï¼Œå’ŒuserId&lt;br&gt;â”â”â”â”â”â”â”â”&lt;br&gt;ZSetæŒ‰æ—¶é—´æˆ³å€’åº&lt;br&gt;â”â”â”â”â”â”â”â”&lt;br&gt;score     member&lt;br&gt;1704600000 â†’ 101&lt;br&gt;1704599000 â†’ 98&lt;br&gt;1704598000 â†’ 95&lt;br&gt;â”â”â”â”â”â”â”â”&lt;br&gt;æ»šåŠ¨åˆ†é¡µ: lastIdä½œä¸ºmax&lt;br&gt;offsetè·³è¿‡ç›¸åŒæ—¶é—´æˆ³&lt;/blockquote&gt;" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;fontSize=10;align=left;shape=cylinder3;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="1540" y="230" width="230" height="220" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-34" value="ðŸ’¡ æ»šåŠ¨åˆ†é¡µç®—æ³•ï¼š&#xa;â”â”â”â”â”â”â”â”&#xa;1. å–å½“å‰æ‰¹æ¬¡æœ€å°æ—¶é—´æˆ³&#xa;2. å¦‚æžœæ—¶é—´æˆ³ç›¸åŒï¼Œoffset++&#xa;3. ä¸‹æ¬¡æŸ¥è¯¢ç”¨minTimeå’Œoffset&#xa;4. é¿å…ä¼ ç»Ÿåˆ†é¡µçš„è·³é¡µé—®é¢˜&#xa;é€‚åˆå®žæ—¶Feedæµ" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;fontSize=10;align=left;" vertex="1" parent="1">
          <mxGeometry x="1540" y="470" width="240" height="140" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-35" value="ðŸ“ MySQL: tb_blog&#xa;â”â”â”â”â”â”â”â”&#xa;æ ¹æ®IDsæ‰¹é‡æŸ¥è¯¢&#xa;ORDER BY FIELDä¿è¯&#xa;è¿”å›žé¡ºåºä¸ŽIDsä¸€è‡´&#xa;(è§£å†³INæŸ¥è¯¢ä¹±åº)" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;fontSize=10;align=left;shape=cylinder3;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="1540" y="650" width="200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-36" value="æ­¥éª¤1" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-25" target="KwuJ8whSr2vagKZpqVsR-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-37" value="æ­¥éª¤2" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-26" target="KwuJ8whSr2vagKZpqVsR-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-38" value="ä¸ºç©º" style="rounded=0;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;strokeColor=#b85450;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-27" target="KwuJ8whSr2vagKZpqVsR-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-39" value="ä¸ä¸ºç©º" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-27" target="KwuJ8whSr2vagKZpqVsR-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-40" value="æ­¥éª¤3" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-29" target="KwuJ8whSr2vagKZpqVsR-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-41" value="æ­¥éª¤4" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-30" target="KwuJ8whSr2vagKZpqVsR-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-42" value="æ­¥éª¤5" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-31" target="KwuJ8whSr2vagKZpqVsR-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-43" value="" style="rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Comic Sans MS;dashed=1;strokeColor=#6c8ebf;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-26" target="KwuJ8whSr2vagKZpqVsR-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-44" value="" style="rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;dashed=1;strokeColor=#d6b656;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-29" target="KwuJ8whSr2vagKZpqVsR-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-45" value="" style="rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Comic Sans MS;dashed=1;strokeColor=#b85450;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-30" target="KwuJ8whSr2vagKZpqVsR-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-72" value="æŸ¥è¯¢ç‚¹èµžåˆ—è¡¨æµç¨‹ (GET /blog/likes/{id}) - æŒ‰æ—¶é—´æŽ’åºTop5" style="whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontSize=14;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="3300" y="1240" width="600" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-73" value="å¼€å§‹: blogId={id}" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="3330" y="1320" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-74" value="Redis ZRANGE&lt;br/&gt;key=blog:liked:{id}&lt;br/&gt;range: 0 to 4" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="3310" y="1390" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-75" value="top5ä¸ºç©º?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="3330" y="1550" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-76" value="è¿”å›žç©ºåˆ—è¡¨&lt;br/&gt;Result.ok(emptyList)" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="3740" y="1550" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-77" value="è½¬æ¢Set&amp;lt;String&amp;gt;&lt;br/&gt;â†’ List&amp;lt;Long&amp;gt; ids" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="3310" y="1650" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-78" value="æ‹¼æŽ¥idsStr&lt;br/&gt;StrUtil.join(&quot;,&quot;, ids)&lt;br/&gt;&quot;1,5,3&quot;" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="3310" y="1720" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-79" value="MySQLæŸ¥è¯¢tb_user&lt;br/&gt;WHERE id IN (ids)&lt;br/&gt;ORDER BY FIELD(id, idsStr)&lt;br/&gt;ä¿æŒRedisçš„æŽ’åº" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="3310" y="1800" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-80" value="è½¬æ¢User â†’ UserDTO&lt;br/&gt;åªè¿”å›žè„±æ•ä¿¡æ¯&lt;br/&gt;(id, nickname, icon)" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="3310" y="1920" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-81" value="è¿”å›žList&amp;lt;UserDTO&amp;gt;&lt;br/&gt;Result.ok(userDTOs)" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="3310" y="2080" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-82" value="Redis ZSet&lt;br/&gt;blog:liked:{blogId}&lt;br/&gt;member=userId&lt;br/&gt;score=timestamp" style="rounded=0;whiteSpace=wrap;html=1;;shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffcccc;strokeColor=#b85450;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="3740" y="1380" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-83" value="MySQL tb_user&lt;br/&gt;æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯&lt;br/&gt;(nickname, icon)" style="rounded=0;whiteSpace=wrap;html=1;;shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#cce5ff;strokeColor=#36393d;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="3740" y="1805" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-84" value="è®¾è®¡è¦ç‚¹:&lt;br/&gt;1. ZSetæŒ‰æ—¶é—´scoreè‡ªåŠ¨æŽ’åºï¼ŒZRANGE 0 4ç›´æŽ¥èŽ·å–æœ€æ—©ç‚¹èµžçš„5äºº&lt;br/&gt;2. ORDER BY FIELDä¿æŒRedisçš„æŽ’åºï¼Œé¿å…MySQLçš„INå¯¼è‡´ä¹±åº&lt;br/&gt;3. åªè¿”å›žUserDTOè„±æ•æ•°æ®ï¼Œä¸æš´éœ²æ‰‹æœºå·ç­‰éšç§&lt;br/&gt;4. æ— ç¼“å­˜ï¼Œç›´æŽ¥æŸ¥Redis+MySQLï¼ˆç‚¹èµžåˆ—è¡¨å˜åŒ–é¢‘ç¹ï¼‰" style="whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="3550" y="2020" width="350" height="110" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-85" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-73" target="KwuJ8whSr2vagKZpqVsR-74">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-86" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-74" target="KwuJ8whSr2vagKZpqVsR-75">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-87" value="æ˜¯ (æ— äººç‚¹èµž)" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-75" target="KwuJ8whSr2vagKZpqVsR-76">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-88" value="å¦ (æœ‰æ•°æ®)" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-75" target="KwuJ8whSr2vagKZpqVsR-77">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-89" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-77" target="KwuJ8whSr2vagKZpqVsR-78">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-90" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-78" target="KwuJ8whSr2vagKZpqVsR-79">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-91" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-79" target="KwuJ8whSr2vagKZpqVsR-80">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-92" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-80" target="KwuJ8whSr2vagKZpqVsR-81">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-93" value="ZRANGE 0 4" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-74" target="KwuJ8whSr2vagKZpqVsR-82">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-94" value="SELECT + ORDER BY FIELD" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-79" target="KwuJ8whSr2vagKZpqVsR-83">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-95" value="å…³æ³¨/å–å…³æµç¨‹ (PUT /user/follow/{id}/{isFollow}) - FeedæŽ¨é€çš„åŸºç¡€" style="whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontSize=14;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="70" y="1240" width="650" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-96" value="å¼€å§‹: å½“å‰ç”¨æˆ·&lt;br/&gt;æ“ä½œç›®æ ‡userId" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="315" y="1320" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-97" value="èŽ·å–å½“å‰ç”¨æˆ·ID&lt;br/&gt;UserHolder.getUser()" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="315" y="1420" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-98" value="åˆ¤æ–­æ“ä½œç±»åž‹&lt;br/&gt;isFellow==true?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="315" y="1520" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-99" value="å…³æ³¨åˆ†æ”¯:&lt;br/&gt;åˆ›å»ºFollowå¯¹è±¡&lt;br/&gt;userId=å½“å‰ç”¨æˆ·&lt;br/&gt;followUserId=ç›®æ ‡ç”¨æˆ·" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="30" y="1590" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-100" value="MySQLä¿å­˜&lt;br/&gt;INSERT INTO tb_follow&lt;br/&gt;(user_id, follow_user_id)" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="30" y="1710" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-101" value="if(success)&lt;br/&gt;Redis SADD&lt;br/&gt;follows:{userId}&lt;br/&gt;æ·»åŠ followUserId" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="30" y="1940" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-102" value="å–å…³åˆ†æ”¯:&lt;br/&gt;æž„å»ºåˆ é™¤æ¡ä»¶&lt;br/&gt;user_id=å½“å‰ç”¨æˆ·&lt;br/&gt;follow_user_id=ç›®æ ‡" style="whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="600" y="1585" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-103" value="MySQLåˆ é™¤&lt;br/&gt;DELETE FROM tb_follow&lt;br/&gt;WHEREæ¡ä»¶åŒ¹é…" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="600" y="1718" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-104" value="if(success)&lt;br/&gt;Redis SREM&lt;br/&gt;follows:{userId}&lt;br/&gt;ç§»é™¤followUserId" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="600" y="1930" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-105" value="è¿”å›žResult.ok()" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="335" y="2070" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-106" value="MySQL tb_follow&lt;br/&gt;user_id (ç²‰ä¸)&lt;br/&gt;follow_user_id (åšä¸»)&lt;br/&gt;create_time" style="rounded=0;whiteSpace=wrap;html=1;;shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#cce5ff;strokeColor=#36393d;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="315" y="1690" width="160" height="110" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-107" value="Redis Set&lt;br/&gt;follows:{userId}&lt;br/&gt;members: å…³æ³¨çš„&lt;br/&gt;åšä¸»IDåˆ—è¡¨" style="rounded=0;whiteSpace=wrap;html=1;;shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffcccc;strokeColor=#b85450;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="315" y="1830" width="160" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-108" value="è®¾è®¡è¦ç‚¹:&lt;br/&gt;1. MySQLä¼˜å…ˆåŽŸåˆ™: å…ˆæ“ä½œMySQLï¼ŒæˆåŠŸåŽå†åŒæ­¥Redisï¼ˆä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼‰&lt;br/&gt;2. Redis Setç”¨é€”: å¿«é€ŸæŸ¥è¯¢&quot;å…±åŒå…³æ³¨&quot;ï¼ˆSINTERå‘½ä»¤ï¼‰å’Œ&quot;æ˜¯å¦å·²å…³æ³¨&quot;ï¼ˆSISMEMBERï¼‰&lt;br/&gt;3. å…³æ³¨å…³ç³»å½±å“FeedæŽ¨é€: å‘å¸ƒç¬”è®°æ—¶ä¼šæŸ¥tb_followæ‰¾ç²‰ä¸ï¼ŒæŽ¨é€åˆ°ç²‰ä¸çš„feed:{userId}&lt;br/&gt;4. åŒå†™ç­–ç•¥: tb_followæ˜¯æƒå¨æ•°æ®æºï¼ŒRedisä½œä¸ºæ€§èƒ½ä¼˜åŒ–çš„ç¼“å­˜å±‚" style="whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="120" y="2150" width="640" height="120" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-109" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-96" target="KwuJ8whSr2vagKZpqVsR-97">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-110" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-97" target="KwuJ8whSr2vagKZpqVsR-98">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-111" value="æ˜¯ (å…³æ³¨)" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-98" target="KwuJ8whSr2vagKZpqVsR-99">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-112" value="å¦ (å–å…³)" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-98" target="KwuJ8whSr2vagKZpqVsR-102">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-113" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-99" target="KwuJ8whSr2vagKZpqVsR-100">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-114" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-100" target="KwuJ8whSr2vagKZpqVsR-101">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-115" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-101" target="KwuJ8whSr2vagKZpqVsR-105">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-116" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-102" target="KwuJ8whSr2vagKZpqVsR-103">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-117" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-103" target="KwuJ8whSr2vagKZpqVsR-104">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-118" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-104" target="KwuJ8whSr2vagKZpqVsR-105">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-119" value="INSERT" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-100" target="KwuJ8whSr2vagKZpqVsR-106">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-120" value="DELETE" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-103" target="KwuJ8whSr2vagKZpqVsR-106">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-121" value="SADD" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-101" target="KwuJ8whSr2vagKZpqVsR-107">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-122" value="SREM" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-104" target="KwuJ8whSr2vagKZpqVsR-107">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-123" value="æŸ¥è¯¢Blogè¯¦æƒ…æµç¨‹ (GET /blog/{id}) - èšåˆç”¨æˆ·ä¿¡æ¯å’Œç‚¹èµžçŠ¶æ€" style="whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontSize=14;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1010" y="1240" width="430" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-124" value="å¼€å§‹: blogId={id}" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1040" y="1320" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-125" value="MySQLæŸ¥è¯¢tb_blog&lt;br/&gt;getById(id)" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1030" y="1450" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-126" value="blog == null?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1040" y="1570" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-127" value="è¿”å›žfail&lt;br/&gt;&quot;åšå®¢ä¸å­˜åœ¨æˆ–å·²åˆ é™¤&quot;" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1275" y="1570" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-128" value="queryBlogUser(blog)&lt;br/&gt;æŸ¥è¯¢å‘å¸ƒè€…ä¿¡æ¯" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1020" y="1690" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-129" value="MySQLæŸ¥è¯¢tb_user&lt;br/&gt;æ ¹æ®blog.userId&lt;br/&gt;èŽ·å–nicknameå’Œicon" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1020" y="1790" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-130" value="è®¾ç½®blog.name&lt;br/&gt;è®¾ç½®blog.icon&lt;br/&gt;å¡«å……å‘å¸ƒè€…ä¿¡æ¯" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1020" y="1870" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-131" value="isBlogLiked(blog)&lt;br/&gt;æ£€æŸ¥å½“å‰ç”¨æˆ·ç‚¹èµžçŠ¶æ€" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1020" y="1955" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-132" value="èŽ·å–å½“å‰ç”¨æˆ·&lt;br/&gt;UserHolder.getUser()" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1020" y="2040" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-133" value="user == null?&lt;br/&gt;(æœªç™»å½•)" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1040" y="2120" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-134" value="ç›´æŽ¥return&lt;br/&gt;(ä¸æ£€æŸ¥ç‚¹èµžçŠ¶æ€)" style="whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1270" y="2120" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-135" value="Redis ZSCORE&lt;br/&gt;blog:liked:{blogId}&lt;br/&gt;æŸ¥è¯¢userIdæ˜¯å¦å­˜åœ¨" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1010" y="2210" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-136" value="è®¾ç½®blog.isLike&lt;br/&gt;= (score != null)" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1020" y="2330" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-137" value="è¿”å›žResult.ok(blog)" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1040" y="2430" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-138" value="MySQL tb_blog&lt;br/&gt;id, title, content&lt;br/&gt;userId, liked" style="rounded=0;whiteSpace=wrap;html=1;;shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#cce5ff;strokeColor=#36393d;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1280" y="1440" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-139" value="MySQL tb_user&lt;br/&gt;id, nickname&lt;br/&gt;icon" style="rounded=0;whiteSpace=wrap;html=1;;shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#cce5ff;strokeColor=#36393d;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1275" y="1780" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-140" value="Redis ZSet&lt;br/&gt;blog:liked:{blogId}&lt;br/&gt;æŸ¥ç‚¹èµžçŠ¶æ€" style="rounded=0;whiteSpace=wrap;html=1;;shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffcccc;strokeColor=#b85450;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1270" y="2210" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-141" value="è®¾è®¡è¦ç‚¹:&lt;br/&gt;1. ä¸‰å±‚æ•°æ®èšåˆ: BlogåŸºæœ¬ä¿¡æ¯ + å‘å¸ƒè€…Userä¿¡æ¯ + å½“å‰ç”¨æˆ·ç‚¹èµžçŠ¶æ€&lt;br/&gt;2. æœªç™»å½•ç”¨æˆ·å‹å¥½: user==nullæ—¶ç›´æŽ¥returnï¼Œä¸æŸ¥Redisï¼Œé¿å…æŠ¥é”™&lt;br/&gt;3. ç‚¹èµžçŠ¶æ€å®žæ—¶æŸ¥è¯¢: æ¯æ¬¡éƒ½æŸ¥Redis ZSetï¼Œä¿è¯isLikeå­—æ®µå‡†ç¡®æ€§&lt;br/&gt;4. N+1é—®é¢˜: queryBlogUseræ¯æ¬¡éƒ½æŸ¥MySQLï¼Œé€‚åˆå•æ¡è¯¦æƒ…ï¼›åˆ—è¡¨æŸ¥è¯¢åº”æ‰¹é‡ä¼˜åŒ–&lt;br/&gt;5. è¿”å›žå®Œæ•´Blogå¯¹è±¡: åŒ…å«nameã€iconã€isLikeç­‰å‰ç«¯å±•ç¤ºæ‰€éœ€çš„æ‰€æœ‰å­—æ®µ" style="whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1020" y="2500" width="400" height="130" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-142" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-124" target="KwuJ8whSr2vagKZpqVsR-125">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-143" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-125" target="KwuJ8whSr2vagKZpqVsR-126">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-144" value="æ˜¯ (ä¸å­˜åœ¨)" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-126" target="KwuJ8whSr2vagKZpqVsR-127">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-145" value="å¦ (å­˜åœ¨)" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-126" target="KwuJ8whSr2vagKZpqVsR-128">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-146" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-128" target="KwuJ8whSr2vagKZpqVsR-129">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-147" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-129" target="KwuJ8whSr2vagKZpqVsR-130">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-148" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-130" target="KwuJ8whSr2vagKZpqVsR-131">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-149" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-131" target="KwuJ8whSr2vagKZpqVsR-132">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-150" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-132" target="KwuJ8whSr2vagKZpqVsR-133">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-151" value="æ˜¯ (æœªç™»å½•)" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-133" target="KwuJ8whSr2vagKZpqVsR-134">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-152" value="å¦ (å·²ç™»å½•)" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-133" target="KwuJ8whSr2vagKZpqVsR-135">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-153" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-135" target="KwuJ8whSr2vagKZpqVsR-136">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-154" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-136" target="KwuJ8whSr2vagKZpqVsR-137">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-155" value="SELECT" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-125" target="KwuJ8whSr2vagKZpqVsR-138">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-156" value="SELECT by userId" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-129" target="KwuJ8whSr2vagKZpqVsR-139">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-157" value="ZSCORE" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-135" target="KwuJ8whSr2vagKZpqVsR-140">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-158" value="æŸ¥è¯¢çƒ­é—¨Blogæµç¨‹ (GET /blog/hot) - åˆ†é¡µæŸ¥è¯¢+æ‰¹é‡èšåˆ" style="whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontSize=14;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1670" y="1240" width="650" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-159" value="å¼€å§‹: current&lt;br/&gt;(å½“å‰é¡µç )" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1720" y="1320" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-160" value="MyBatis-Plusåˆ†é¡µæŸ¥è¯¢&lt;br/&gt;ORDER BY liked DESC&lt;br/&gt;Page(current, MAX_PAGE_SIZE)" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1680" y="1400" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-161" value="èŽ·å–å½“å‰é¡µæ•°æ®&lt;br/&gt;page.getRecords()&lt;br/&gt;List&amp;lt;Blog&amp;gt;" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1700" y="1500" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-162" value="forEachå¾ªçŽ¯&lt;br/&gt;éåŽ†æ¯ä¸ªBlog" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1700" y="1595" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-163" value="queryBlogUser(blog)&lt;br/&gt;å¡«å……å‘å¸ƒè€…ä¿¡æ¯&lt;br/&gt;(name, icon)" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2130" y="1595" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-164" value="isBlogLiked(blog)&lt;br/&gt;å¡«å……å½“å‰ç”¨æˆ·&lt;br/&gt;ç‚¹èµžçŠ¶æ€" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1930" y="1795" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-165" value="å¾ªçŽ¯ç»“æŸ&lt;br/&gt;æ‰€æœ‰Blogå·²å¤„ç†" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1710" y="1800" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-166" value="è¿”å›žResult.ok&lt;br/&gt;(records)" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="1720" y="2010" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-167" value="MySQL tb_blog&lt;br/&gt;ORDER BY liked DESC&lt;br/&gt;LIMIT offset, size&lt;br/&gt;åˆ†é¡µæŸ¥è¯¢" style="rounded=0;whiteSpace=wrap;html=1;;shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#cce5ff;strokeColor=#36393d;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="2140" y="1395" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-168" value="MySQL tb_user&lt;br/&gt;Næ¬¡æŸ¥è¯¢&lt;br/&gt;(N+1é—®é¢˜)" style="rounded=0;whiteSpace=wrap;html=1;;shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#cce5ff;strokeColor=#36393d;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="2140" y="1970" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-169" value="Redis ZSet&lt;br/&gt;Næ¬¡ZSCORE&lt;br/&gt;blog:liked:{blogId}" style="rounded=0;whiteSpace=wrap;html=1;;shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffcccc;strokeColor=#b85450;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1940" y="1970" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-170" value="è®¾è®¡è¦ç‚¹:&lt;br/&gt;1. æŒ‰ç‚¹èµžæ•°æŽ’åº: ORDER BY liked DESCèŽ·å–çƒ­é—¨å†…å®¹ï¼Œåˆ©ç”¨MySQLç´¢å¼•ä¼˜åŒ–&lt;br/&gt;2. åˆ†é¡µå‚æ•°: current=é¡µç ï¼ŒMAX_PAGE_SIZE=æ¯é¡µå¤§å°ï¼ˆå¸¸é‡å®šä¹‰ï¼‰&lt;br/&gt;3. N+1æŸ¥è¯¢é—®é¢˜: forEachä¸­æ¯ä¸ªBlogéƒ½æŸ¥MySQLå’ŒRedisï¼Œæ€§èƒ½ç“¶é¢ˆï¼&lt;br/&gt;   - ä¼˜åŒ–æ–¹æ¡ˆ: æ‰¹é‡æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ listByIds(userIds)&lt;br/&gt;   - ä¼˜åŒ–æ–¹æ¡ˆ: Pipelineæ‰¹é‡æŸ¥è¯¢Redisç‚¹èµžçŠ¶æ€&lt;br/&gt;4. è¿”å›žå®Œæ•´æ•°æ®: æ¯ä¸ªBlogåŒ…å«nameã€iconã€isLikeï¼Œå‰ç«¯ç›´æŽ¥å±•ç¤º&lt;br/&gt;5. é€‚ç”¨åœºæ™¯: çƒ­é—¨æ¦œå•ã€æŽ¨èåˆ—è¡¨ç­‰æŒ‰çƒ­åº¦æŽ’åºçš„åœºæ™¯" style="whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1695" y="2120" width="650" height="140" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-171" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-159" target="KwuJ8whSr2vagKZpqVsR-160">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-172" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-160" target="KwuJ8whSr2vagKZpqVsR-161">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-173" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-161" target="KwuJ8whSr2vagKZpqVsR-162">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-174" value="å¾ªçŽ¯ä½“" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-162" target="KwuJ8whSr2vagKZpqVsR-163">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-175" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-163" target="KwuJ8whSr2vagKZpqVsR-164">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-176" value="ä¸‹ä¸€ä¸ªBlog" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#999999;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-164" target="KwuJ8whSr2vagKZpqVsR-162">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-177" value="éåŽ†å®Œæˆ" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-162" target="KwuJ8whSr2vagKZpqVsR-165">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-178" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-165" target="KwuJ8whSr2vagKZpqVsR-166">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-179" value="SELECTåˆ†é¡µ" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-160" target="KwuJ8whSr2vagKZpqVsR-167">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-180" value="æ¯æ¬¡SELECT" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-163" target="KwuJ8whSr2vagKZpqVsR-168">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-181" value="æ¯æ¬¡ZSCORE" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-164" target="KwuJ8whSr2vagKZpqVsR-169">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-209" value="æŸ¥è¯¢å…±åŒå…³æ³¨æµç¨‹ (GET /user/follow/common/{id}) - Redis Setäº¤é›†" style="whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontSize=14;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2570" y="1240" width="590" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-210" value="å¼€å§‹: ç›®æ ‡ç”¨æˆ·id&lt;br/&gt;(åšä¸»/å…¶ä»–ç”¨æˆ·)" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2640" y="1320" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-211" value="èŽ·å–å½“å‰ç”¨æˆ·ID&lt;br/&gt;UserHolder.getUser()&lt;br/&gt;.getId()" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2640" y="1400" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-212" value="æž„å»ºRedis Key&lt;br/&gt;key1 = follows:{ç›®æ ‡id}&lt;br/&gt;key2 = follows:{å½“å‰id}" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2630" y="1480" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-213" value="Redis SINTER&lt;br/&gt;æ±‚ä¸¤ä¸ªSetçš„äº¤é›†&lt;br/&gt;intersect = SINTER key1 key2" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2610" y="1590" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-214" value="intersectä¸ºç©º?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2650" y="1700" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-215" value="è¿”å›žç©ºåˆ—è¡¨&lt;br/&gt;Result.ok(emptyList)" style="whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="3005" y="1700" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-216" value="è½¬æ¢Set&amp;lt;String&amp;gt;&lt;br/&gt;â†’ List&amp;lt;Long&amp;gt; ids&lt;br/&gt;map(Long::valueOf)" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2630" y="1790" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-217" value="MySQLæ‰¹é‡æŸ¥è¯¢&lt;br/&gt;userService.listByIds(ids)&lt;br/&gt;èŽ·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2610" y="1880" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-218" value="è½¬æ¢User â†’ UserDTO&lt;br/&gt;åªè¿”å›žè„±æ•ä¿¡æ¯&lt;br/&gt;(id, nickname, icon)" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2630" y="2000" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-219" value="è¿”å›žList&amp;lt;UserDTO&amp;gt;&lt;br/&gt;Result.ok(userDTOs)" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2995" y="2005" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-220" value="Redis Set&lt;br/&gt;follows:{ç›®æ ‡userId}&lt;br/&gt;follows:{å½“å‰userId}&lt;br/&gt;å­˜å‚¨å…³æ³¨çš„åšä¸»ID" style="rounded=0;whiteSpace=wrap;html=1;;shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffcccc;strokeColor=#b85450;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="2985" y="1430" width="180" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-221" value="MySQL tb_user&lt;br/&gt;æ‰¹é‡æŸ¥è¯¢IN (ids)&lt;br/&gt;èŽ·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯" style="rounded=0;whiteSpace=wrap;html=1;;shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#cce5ff;strokeColor=#36393d;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="2995" y="1810" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-222" value="è®¾è®¡è¦ç‚¹:&lt;br/&gt;1. Redis Setå¤©ç„¶æ”¯æŒäº¤é›†: SINTERå‘½ä»¤æ—¶é—´å¤æ‚åº¦O(N*M)ï¼ŒNæ˜¯æœ€å°é›†åˆå¤§å°&lt;br/&gt;2. ä¸ºä»€ä¹ˆç”¨Redisä¸ç”¨MySQL: é¿å…å¤æ‚çš„JOINæˆ–å­æŸ¥è¯¢ï¼ŒRediså†…å­˜æ“ä½œæ›´å¿«&lt;br/&gt;3. æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–: listByIds(ids)ä¸€æ¬¡æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼Œé¿å…N+1é—®é¢˜&lt;br/&gt;4. åº”ç”¨åœºæ™¯: ç¤¾äº¤ç½‘ç»œä¸­çš„&quot;å…±åŒå¥½å‹&quot;ã€&quot;ä½ å¯èƒ½è®¤è¯†çš„äºº&quot;ç­‰åŠŸèƒ½&lt;br/&gt;5. æ‰©å±•: å¯ç”¨SUNIONæ±‚&quot;æ‰€æœ‰å…³æ³¨&quot;ï¼ŒSDIFFæ±‚&quot;å•å‘å…³æ³¨&quot;ï¼ˆæˆ‘å…³æ³¨ä½†å¯¹æ–¹æœªå…³æ³¨ï¼‰" style="whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontFamily=Comic Sans MS;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="2609" y="2090" width="571" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-223" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-210" target="KwuJ8whSr2vagKZpqVsR-211">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-224" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-211" target="KwuJ8whSr2vagKZpqVsR-212">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-225" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-212" target="KwuJ8whSr2vagKZpqVsR-213">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-226" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-213" target="KwuJ8whSr2vagKZpqVsR-214">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-227" value="æ˜¯ (æ— å…±åŒå…³æ³¨)" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-214" target="KwuJ8whSr2vagKZpqVsR-215">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-228" value="å¦ (æœ‰äº¤é›†)" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-214" target="KwuJ8whSr2vagKZpqVsR-216">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-229" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-216" target="KwuJ8whSr2vagKZpqVsR-217">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-230" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-217" target="KwuJ8whSr2vagKZpqVsR-218">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-231" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-218" target="KwuJ8whSr2vagKZpqVsR-219">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-232" value="SINTERä¸¤ä¸ªSet" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-213" target="KwuJ8whSr2vagKZpqVsR-220">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-233" value="æ‰¹é‡SELECT IN" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-217" target="KwuJ8whSr2vagKZpqVsR-221">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-237" value="â”â”â”â”â”â” ç‚¹èµžåŠŸèƒ½æµç¨‹ (PUT /blog/like/{id}) - é˜²é‡å¤ â”â”â”â”â”â”" style="whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontFamily=Comic Sans MS;fontSize=15;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="2290" y="-60" width="740" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-238" value="å¼€å§‹: ç‚¹èµž/å–æ¶ˆç‚¹èµž&#xa;PUT /blog/like/{id}" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Comic Sans MS;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="2621" y="20" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-239" value="æŸ¥è¯¢Redis ZSet&#xa;ZSCORE blog:liked:{id} {userId}" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2620" y="100" width="140" height="90" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-240" value="åˆ¤æ–­: scoreæ˜¯å¦ä¸ºnull?" style="whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontFamily=Comic Sans MS;shape=rhombus;" vertex="1" parent="1">
          <mxGeometry x="2620" y="210" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-241" value="æœªç‚¹èµž(score==null)&#xa;MySQLç‚¹èµžæ•°+1&#xa;UPDATE tb_blog SET liked=liked+1" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2970" y="270" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-242" value="æ·»åŠ åˆ°Redis ZSet&#xa;ZADD blog:liked:{id} {timestamp} {userId}" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2970" y="620" width="140" height="90" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-243" value="MySQLç‚¹èµžæ•°-1&#xa;UPDATE tb_blog SET liked=liked-1" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2240" y="270" width="130" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-244" value="ä»ŽRedisç§»é™¤&#xa;ZREM blog:liked:{id} {userId}" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="2240" y="630" width="130" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-245" value="è¿”å›žæˆåŠŸ&#xa;Result.ok()" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Comic Sans MS;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="2621" y="740" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-246" value="ðŸ”´ Redis: blog:liked:{blogId}&#xa;â”â”â”â”â”â”â”â”&#xa;æ•°æ®ç»“æž„: ZSet&#xa;score: ç‚¹èµžæ—¶é—´æˆ³&#xa;member: userId&#xa;â”â”â”â”â”â”â”â”&#xa;ä½œç”¨: &#xa;1. é˜²æ­¢é‡å¤ç‚¹èµž&#xa;2. æŒ‰æ—¶é—´æŽ’åºç‚¹èµžç”¨æˆ·" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Comic Sans MS;fontSize=10;align=left;shape=cylinder3;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="2765" y="420" width="220" height="160" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-247" value="ðŸ“ MySQL: tb_blog&#xa;â”â”â”â”â”â”â”â”&#xa;likedå­—æ®µ: ç‚¹èµžæ€»æ•°&#xa;â”â”â”â”â”â”â”â”&#xa;æ³¨æ„: MySQLå­˜æ€»æ•°&#xa;Rediså­˜æ˜Žç»†(è°ç‚¹çš„)" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Comic Sans MS;fontSize=10;align=left;shape=cylinder3;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="2400" y="435" width="220" height="130" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-248" value="ðŸ’¡ ç¼“å­˜åŒæ­¥ç­–ç•¥ï¼š&#xa;â”â”â”â”â”â”â”â”&#xa;å…ˆæ›´æ–°MySQLï¼ŒæˆåŠŸåŽ&#xa;å†æ›´æ–°Redis&#xa;if (success) { redisæ“ä½œ }&#xa;ä¿è¯æ•°æ®ä¸€è‡´æ€§" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=none;fontFamily=Comic Sans MS;fontSize=10;align=left;" vertex="1" parent="1">
          <mxGeometry x="2310" y="40" width="220" height="120" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-249" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-238" target="KwuJ8whSr2vagKZpqVsR-239">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-250" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-239" target="KwuJ8whSr2vagKZpqVsR-240">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-251" value="æ˜¯ (score==null)æ²¡ç‚¹èµžï¼Œæˆ‘è¦ç‚¹èµž" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-240" target="KwuJ8whSr2vagKZpqVsR-241">
          <mxGeometry x="-0.0038" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-252" value="å¦ (å·²ç‚¹èµžï¼Œè¦å–æ¶ˆç‚¹èµž&lt;span style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;)&lt;/span&gt;" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-240" target="KwuJ8whSr2vagKZpqVsR-243">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-253" value="if(success)" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-241" target="KwuJ8whSr2vagKZpqVsR-242">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-254" value="if(success)" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-243" target="KwuJ8whSr2vagKZpqVsR-244">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-255" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-242" target="KwuJ8whSr2vagKZpqVsR-245">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-256" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontFamily=Comic Sans MS;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-244" target="KwuJ8whSr2vagKZpqVsR-245">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-257" value="ZSCORE" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-239" target="KwuJ8whSr2vagKZpqVsR-246">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-258" value="ZADD" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-242" target="KwuJ8whSr2vagKZpqVsR-246">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-259" value="ZREM" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-244" target="KwuJ8whSr2vagKZpqVsR-246">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-260" value="UPDATE liked+1" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-241" target="KwuJ8whSr2vagKZpqVsR-247">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KwuJ8whSr2vagKZpqVsR-261" value="UPDATE liked-1" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;dashed=1;fontFamily=Comic Sans MS;strokeColor=#666666;" edge="1" parent="1" source="KwuJ8whSr2vagKZpqVsR-243" target="KwuJ8whSr2vagKZpqVsR-247">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
